---
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import Drawer from "../../components/Drawer.astro";
import BottomNav from "../../components/BottomNav.astro";
import FilmCard from "../../components/FilmCard.astro";

import { getTrendingMoviesPreview } from "../../api/main.js";
const movies = await getTrendingMoviesPreview();
const imagesURL = "https://image.tmdb.org/t/p/w300";
//TODO
//hacer las categories dimanicas con la function especifica para ello
---

<Layout title="Fox Films">
  <Navbar />
  <Drawer />
  <div class="dark:bg-gray-800 px-8 py-20">
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {
        movies.map((movie) => {
          return (
            <div class="flex self-center">
            <FilmCard
              image={imagesURL + movie.poster_path}
              alt={movie.title}
              stars={movie.vote_average}
            />
            </div>
          );
        })
      }
    </div>
  </div>
</Layout>

<BottomNav />
